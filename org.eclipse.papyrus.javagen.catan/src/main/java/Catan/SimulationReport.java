// --------------------------------------------------------
// Code generated by Papyrus Java
// --------------------------------------------------------

package Catan;

/************************************************************/

import java.util.List;
import java.util.Map;
import java.util.Objects;

/*
 * EN: SimulationReport wraps simulation logs and final player state.
 * EN: It is the output object returned by GameEngine.
 * ZH: SimulationReport 封装模拟日志与最终玩家状态。
 * ZH: 它是 GameEngine 返回的结果对象。
 */
public final class SimulationReport {
    private final List<String> logLines;
    private final List<Player> players;

    public SimulationReport(List<String> logLines, List<Player> players) {
        this.logLines = List.copyOf(Objects.requireNonNull(logLines, "logLines"));
        this.players = List.copyOf(Objects.requireNonNull(players, "players"));
    }

    public List<String> getLogLines() {
        return logLines;
    }

    public List<Player> getPlayers() {
        return players;
    }

    // EN: Build the human-readable final scoreboard.
    // ZH: 生成可读的最终计分摘要。
    public String summarize() {
        StringBuilder summary = new StringBuilder();
        summary.append("Final Summary\n");
        for (Player player : players) {
            summary.append("- ").append(player.getName()).append(" scores ").append(player.getVictoryPoints()).append(", resources: ");
            for (Map.Entry<ResourceType, Integer> entry : player.getResources().entrySet()) {
                summary.append(entry.getKey()).append("=").append(entry.getValue()).append(" ");
            }
            summary.append("settlements=").append(player.getSettlementNodeIds().size());
            summary.append(" cities=").append(player.getCityNodeIds().size());
            summary.append(" roads=").append(player.getRoadPathIds().size());
            summary.append("\n");
        }
        return summary.toString();
    }
}
